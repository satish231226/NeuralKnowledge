<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>My Profile | NeuralKnowledgeApp</title>

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css"
          rel="stylesheet">

    <style>
        body {
            background: radial-gradient(circle at top, #0f172a, #020617);
            color: #e5e7eb;
        }

        .profile-card {
            background: #020617;
            border-radius: 18px;
            padding: 30px;
            box-shadow: 0 10px 40px rgba(0,0,0,0.6);
        }

        .profile-img {
            width: 140px;
            height: 140px;
            border-radius: 50%;
            object-fit: cover;
            border: 3px solid #334155;
        }

        .label {
            font-size: 14px;
            opacity: 0.7;
        }

        .value {
            font-weight: 600;
            font-size: 16px;
        }
    </style>
</head>

<body>

<!-- NAVBAR -->
<nav class="navbar navbar-dark bg-dark px-4">
    <span class="navbar-brand">NeuralKnowledgeApp</span>
    <a th:href="@{/dashboard}" class="btn btn-outline-light btn-sm">Dashboard</a>
</nav>

<div class="container mt-5">

    <div class="row justify-content-center">
        <div class="col-md-6">

            <div class="profile-card text-center">

                <!-- PROFILE PHOTO -->
                <img class="profile-img mb-3"
                     th:src="@{/getProfileImage}"
                     alt="Profile Photo"/>

                <!-- UPLOAD PHOTO -->
                <form th:action='@{/uploadProfileImage}' method="post"
                      enctype="multipart/form-data" class="mb-4">

                    <input type="file" name="img"
                           class="form-control form-control-sm mb-2" required>
                    <input type="hidden"
                       th:name="${_csrf.parameterName}"
                       th:value="${_csrf.token}">

                    <button class="btn btn-primary btn-sm">
                        Update Photo
                    </button>
                </form>

                <hr class="text-secondary">

                <!-- USER DETAILS -->
                <div class="mb-3">
                    <div class="label">Username (Email)</div>
                    <div class="value" th:text="${user.username}"></div>
                </div>

                <div class="mb-3">
                    <div class="label">Full Name</div>
                    <div class="value" th:text="${user.name}"></div>
                </div>

                <div class="mb-3">
                    <div class="label">Phone Number</div>
                    <div class="value" th:text="${user.phone}"></div>
                </div>

                <div class="mb-3">
                    <div class="label">Role</div>
                    <div class="value" th:text="${user.role}"></div>
                </div>

                <div class="mb-3">
                    <div class="label">Account Status</div>
                    <div class="value"
                         th:text="${user.enabled ? 'Active' : 'Disabled'}">
                    </div>
                </div>

                <div class="mt-4">
                    <a th:href="@{/changePassword}"
                       class="btn btn-warning btn-sm me-2">
                        Change Password
                    </a>
                </div>

            </div>

        </div>
    </div>

</div>

</body>
</html>
